package com.lonfe.spring;import com.lonfe.processor.Service;import com.lonfe.processor.ServiceExportor;import org.springframework.beans.factory.support.BeanDefinitionBuilder;import org.springframework.beans.factory.xml.AbstractSingleBeanDefinitionParser;import org.springframework.beans.factory.xml.ParserContext;import org.w3c.dom.Element;public class MyRPCParser extends AbstractSingleBeanDefinitionParser {	private Class<?> beanClass;	public MyRPCParser(Class<?> beanClass) {		this.beanClass = beanClass;	}	protected Class getBeanClass(Element element) {		return beanClass;	}	@Override	protected void doParse(Element element, ParserContext parserContext, BeanDefinitionBuilder builder) {		if (ReferencesProxy.class.equals(beanClass)) {			String serviceUrl = element.getAttribute("url");			String serviceInterface = element.getAttribute("interface");			builder.addPropertyValue("serviceInterface", serviceInterface);			builder.addPropertyValue("serviceUrl", serviceUrl);		} else if (ProvidersBean.class.equals(beanClass)) {			String id = element.getAttribute("id");			String providerInterface = element.getAttribute("interface");			Service service = new Service();			service.setName(providerInterface);			ServiceExportor.addToServiceMap(service);		}	}}